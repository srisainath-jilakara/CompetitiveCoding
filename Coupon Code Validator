import java.util.*;
class Solution {
    public List<String> validateCoupons(String[] code, String[] businessLine, boolean[] isActive)   {
        HashMap<String,Integer> priority = new HashMap<>();
        priority.put("electronics",1);
        priority.put("grocery",2);
        priority.put("pharmacy",3);
        priority.put("restaurant",4);
        List<Coupon> list = new ArrayList<>();
        for(int i=0;i<code.length;i++) {
            if(!isActive[i]) continue;
            if(code[i]==null||code[i].isEmpty()) continue;
            if(!code[i].matches("[a-zA-Z0-9_]+")) continue;
            if(!priority.containsKey(businessLine[i])) continue;
            list.add(new Coupon(code[i],businessLine[i]));
        }
        List<String> result = new ArrayList<>();
        list.sort((a,b)-> {
        int cmp = Integer.compare(
                    priority.get(a.businessLine),
                    priority.get(b.businessLine)
            );
        if (cmp != 0) return cmp;
            return a.code.compareTo(b.code);
        });
        return list.stream().map(a->a.code).collect(Collectors.toList());

    }
}
class Coupon{
    String code;
    String businessLine;
    public Coupon(String code,String businessLine) {
        this.code = code;
        this.businessLine = businessLine;
    }
}
